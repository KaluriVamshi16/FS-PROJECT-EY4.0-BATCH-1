{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="dashboard-container">
    {% include 'includes/sidebar.html' %}
    <div class="main-content">
        <header style="margin-bottom: 20px;">
            <h1>Settings</h1>
        </header>

        <div class="card"
            style="background: white; padding: 20px; border-radius: 10px; box-shadow: var(--shadow); max-width: 600px;">
            <h3>App Preferences</h3>
            <div style="margin: 20px 0; display: flex; align-items: center; justify-content: space-between;">
                <span>Dark Mode</span>
                <button onclick="toggleDarkMode()" id="darkModeBtn" class="btn-primary">Toggle</button>
            </div>

            <hr style="border: 0; border-top: 1px solid #eee; margin: 20px 0;">

            <h3 style="color: #d32f2f;">Danger Zone</h3>
            <div style="margin: 20px 0;">
                <p>This will permanently delete all your expenses, budgets, and goals.</p>
                <form method="POST" onsubmit="return confirm('Are you sure you want to delete all data?');">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="clear_data">
                    <button type="submit"
                        style="background: #d32f2f; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Reset
                        App Data</button>
                </form>
            </div>
            <div style="margin: 20px 0;">
                <p>Logout from your account.</p>
                <button onclick="handleLogout()"
                    style="background: #666; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Logout</button>
            </div>
        </div>
    </div>
</div>

<script>
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        // Save preference to localStorage
        if (document.body.classList.contains('dark-mode')) {
            localStorage.setItem('theme', 'dark');
        } else {
            localStorage.setItem('theme', 'light');
        }
    }

    // Apply theme on load
    if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-mode');
    }
</script>

<style>
    /* Dark Mode Styles */
    body.dark-mode {
        background-color: #121212;
        color: #e0e0e0;
        --bg-color: #121212;
        --text-color: #e0e0e0;
        --light-gray: #1e1e1e;
        --white: #2c2c2c;
    }

    body.dark-mode .card,
    body.dark-mode .sidebar {
        /* Adjustments handled by var(--white) override mostly */
    }
</style>
{% endblock %}